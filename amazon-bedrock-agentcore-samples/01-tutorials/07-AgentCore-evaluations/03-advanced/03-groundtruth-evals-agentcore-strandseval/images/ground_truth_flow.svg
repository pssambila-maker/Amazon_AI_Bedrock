<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 620" width="800" height="620">
  <!-- Background -->
  <rect width="800" height="620" fill="white"/>

  <!-- Definitions -->
  <defs>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="2" stdDeviation="2" flood-color="#00000015"/>
    </filter>
    <linearGradient id="boxGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#2d2d2d"/>
      <stop offset="100%" style="stop-color:#1a1a1a"/>
    </linearGradient>
    <linearGradient id="smeGradient" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#5a4a3a"/>
      <stop offset="100%" style="stop-color:#4a3728"/>
    </linearGradient>
    <marker id="arrow" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#1a1a1a"/>
    </marker>
  </defs>

  <!-- Title -->
  <text x="400" y="32" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#4a3728" text-anchor="middle">Ground Truth Evaluation Flow</text>

  <!-- ===== ROW 1: Data Sources ===== -->

  <!-- Left: CloudWatch -->
  <g filter="url(#shadow)">
    <rect x="60" y="60" width="280" height="90" rx="6" ry="6" fill="url(#boxGradient)" stroke="#1a1a1a" stroke-width="1.5"/>
  </g>
  <text x="200" y="85" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="white" text-anchor="middle">AgentCore Observability</text>
  <text x="200" y="105" font-family="Arial, sans-serif" font-size="10" fill="#aaaaaa" text-anchor="middle">Actual agent responses</text>
  <rect x="80" y="115" width="240" height="28" rx="3" ry="3" fill="#0d0d0d"/>
  <text x="200" y="133" font-family="Courier, monospace" font-size="9" fill="#7cb87c" text-anchor="middle">session_id + traces [{trace_id, actual_output}]</text>

  <!-- Right: Ground Truth File -->
  <g filter="url(#shadow)">
    <rect x="460" y="60" width="280" height="90" rx="6" ry="6" fill="url(#smeGradient)" stroke="#3a2718" stroke-width="1.5"/>
  </g>
  <text x="600" y="85" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="white" text-anchor="middle">Ground Truth File</text>
  <text x="600" y="105" font-family="Arial, sans-serif" font-size="10" fill="#d0c0b0" text-anchor="middle">Expected outputs (created by SME)</text>
  <rect x="480" y="115" width="240" height="28" rx="3" ry="3" fill="#2a1a0a"/>
  <text x="600" y="133" font-family="Courier, monospace" font-size="9" fill="#cc9999" text-anchor="middle">session_id + ground_truth [{trace_id, expected}]</text>

  <!-- Matching indicator between sources -->
  <text x="400" y="100" font-family="Arial, sans-serif" font-size="10" fill="#4a3728" text-anchor="middle">same session_id</text>
  <text x="400" y="115" font-family="Arial, sans-serif" font-size="10" fill="#4a3728" text-anchor="middle">same trace_ids</text>

  <!-- ===== ROW 2: Notebook Loads Both ===== -->

  <!-- Arrow down from CloudWatch -->
  <line x1="200" y1="150" x2="200" y2="195" stroke="#1a1a1a" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Arrow down from Ground Truth -->
  <line x1="600" y1="150" x2="600" y2="195" stroke="#1a1a1a" stroke-width="1.5" marker-end="url(#arrow)"/>

  <!-- Notebook box spanning both -->
  <g filter="url(#shadow)">
    <rect x="120" y="205" width="560" height="70" rx="6" ry="6" fill="url(#boxGradient)" stroke="#1a1a1a" stroke-width="1.5"/>
  </g>
  <text x="400" y="232" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="white" text-anchor="middle">Notebook: Load &amp; Merge</text>
  <text x="400" y="255" font-family="Arial, sans-serif" font-size="11" fill="#cccccc" text-anchor="middle">Merge traces with ground truth by trace_id</text>

  <!-- ===== ROW 3: Evaluation Cases ===== -->

  <line x1="400" y1="275" x2="400" y2="310" stroke="#1a1a1a" stroke-width="1.5" marker-end="url(#arrow)"/>

  <g filter="url(#shadow)">
    <rect x="180" y="320" width="440" height="80" rx="6" ry="6" fill="url(#boxGradient)" stroke="#1a1a1a" stroke-width="1.5"/>
  </g>
  <text x="400" y="348" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="white" text-anchor="middle">Evaluation Cases</text>
  <text x="400" y="370" font-family="Arial, sans-serif" font-size="10" fill="#aaaaaa" text-anchor="middle">For each trace_id:</text>
  <text x="400" y="388" font-family="Arial, sans-serif" font-size="10" fill="#cccccc" text-anchor="middle">actual_output + expected_output + actual_trajectory + expected_trajectory</text>

  <!-- ===== ROW 4: Evaluators ===== -->

  <line x1="400" y1="400" x2="400" y2="435" stroke="#1a1a1a" stroke-width="1.5" marker-end="url(#arrow)"/>

  <g filter="url(#shadow)">
    <rect x="180" y="445" width="440" height="55" rx="6" ry="6" fill="url(#boxGradient)" stroke="#1a1a1a" stroke-width="1.5"/>
  </g>
  <text x="400" y="470" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white" text-anchor="middle">Evaluators (LLM-as-Judge)</text>
  <text x="400" y="490" font-family="Arial, sans-serif" font-size="10" fill="#999999" text-anchor="middle">Compare actual vs expected â†’ 0.0 to 1.0 (extensible)</text>

  <!-- ===== ROW 5: CloudWatch Output ===== -->

  <line x1="400" y1="500" x2="400" y2="535" stroke="#1a1a1a" stroke-width="1.5" marker-end="url(#arrow)"/>

  <g filter="url(#shadow)">
    <rect x="230" y="545" width="340" height="40" rx="20" ry="20" fill="#4a3728" stroke="#3a2718" stroke-width="1.5"/>
  </g>
  <text x="400" y="570" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white" text-anchor="middle">AgentCore Observability Dashboard</text>

  <!-- ===== Key Concept Box ===== -->
  <rect x="30" y="320" width="130" height="80" rx="4" ry="4" fill="#faf8f5" stroke="#4a3728" stroke-width="1"/>
  <text x="95" y="340" font-family="Arial, sans-serif" font-size="10" font-weight="bold" fill="#4a3728" text-anchor="middle">Key</text>
  <text x="95" y="358" font-family="Arial, sans-serif" font-size="9" fill="#4a3728" text-anchor="middle">session_id: groups</text>
  <text x="95" y="372" font-family="Arial, sans-serif" font-size="9" fill="#4a3728" text-anchor="middle">all traces in session</text>
  <text x="95" y="390" font-family="Arial, sans-serif" font-size="9" fill="#4a3728" text-anchor="middle">trace_id: one interaction</text>
</svg>
