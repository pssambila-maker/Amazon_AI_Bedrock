<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 400">
  <defs>
    <linearGradient id="bgGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#f8fafc;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#e2e8f0;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="grayGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#475569;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#334155;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="purpleGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#8b5cf6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#6d28d9;stop-opacity:1" />
    </linearGradient>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="4" stdDeviation="4" flood-color="#000" flood-opacity="0.1"/>
    </filter>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#94a3b8"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="800" height="400" fill="url(#bgGrad)"/>

  <!-- Title -->
  <text x="400" y="38" font-family="system-ui, -apple-system, sans-serif" font-size="22" font-weight="600" fill="#1e293b" text-anchor="middle">Continuous Loop of Improving AI Agents</text>

  <!-- Box 1: TEST CASES - GRAY -->
  <g transform="translate(40, 70)">
    <rect width="150" height="85" rx="10" fill="white" filter="url(#shadow)"/>
    <rect width="150" height="6" rx="3" fill="url(#grayGrad)" y="0"/>
    <text x="75" y="35" font-family="system-ui, sans-serif" font-size="13" font-weight="600" fill="#1e293b" text-anchor="middle">TEST CASES</text>
    <text x="75" y="55" font-family="system-ui, sans-serif" font-size="10" fill="#64748b" text-anchor="middle">What inputs to</text>
    <text x="75" y="70" font-family="system-ui, sans-serif" font-size="10" fill="#64748b" text-anchor="middle">evaluate</text>
  </g>

  <!-- Box 2: INVOKE AGENT - GRAY -->
  <g transform="translate(325, 70)">
    <rect width="150" height="85" rx="10" fill="white" filter="url(#shadow)"/>
    <rect width="150" height="6" rx="3" fill="url(#grayGrad)" y="0"/>
    <text x="75" y="35" font-family="system-ui, sans-serif" font-size="13" font-weight="600" fill="#1e293b" text-anchor="middle">INVOKE AGENT</text>
    <text x="75" y="55" font-family="system-ui, sans-serif" font-size="10" fill="#64748b" text-anchor="middle">Execute on</text>
    <text x="75" y="70" font-family="system-ui, sans-serif" font-size="10" fill="#64748b" text-anchor="middle">each case</text>
  </g>

  <!-- Box 3: SCORING - GRAY -->
  <g transform="translate(610, 160)">
    <rect width="150" height="85" rx="10" fill="white" filter="url(#shadow)"/>
    <rect width="150" height="6" rx="3" fill="url(#grayGrad)" y="0"/>
    <text x="75" y="35" font-family="system-ui, sans-serif" font-size="13" font-weight="600" fill="#1e293b" text-anchor="middle">SCORING</text>
    <text x="75" y="55" font-family="system-ui, sans-serif" font-size="10" fill="#64748b" text-anchor="middle">LLM-as-a-Judge</text>
    <text x="75" y="70" font-family="system-ui, sans-serif" font-size="10" fill="#64748b" text-anchor="middle">evaluates responses</text>
  </g>

  <!-- Box 4: ANALYSIS - PURPLE (highlighted) -->
  <g transform="translate(440, 265)">
    <rect width="150" height="85" rx="10" fill="white" filter="url(#shadow)"/>
    <rect width="150" height="6" rx="3" fill="url(#purpleGrad)" y="0"/>
    <text x="75" y="32" font-family="system-ui, sans-serif" font-size="13" font-weight="600" fill="#1e293b" text-anchor="middle">ANALYSIS</text>
    <!-- Evaluation Analyzer pill - border only -->
    <rect x="12" y="42" width="126" height="20" rx="10" fill="none" stroke="#8b5cf6" stroke-width="1.5"/>
    <text x="75" y="56" font-family="system-ui, sans-serif" font-size="9" font-weight="500" fill="#7c3aed" text-anchor="middle">Evaluation Analyzer</text>
    <text x="75" y="75" font-family="system-ui, sans-serif" font-size="10" fill="#64748b" text-anchor="middle">Find failure patterns</text>
  </g>

  <!-- Purple text below Analysis box -->
  <text x="515" y="365" font-family="system-ui, sans-serif" font-size="9" fill="#7c3aed" text-anchor="middle">Evaluation Analyzer helps with analysis process</text>
  <text x="515" y="378" font-family="system-ui, sans-serif" font-size="9" fill="#7c3aed" text-anchor="middle">at scale and suggests improvements</text>

  <!-- Box 5: IMPROVEMENTS - GRAY -->
  <g transform="translate(210, 265)">
    <rect width="150" height="85" rx="10" fill="white" filter="url(#shadow)"/>
    <rect width="150" height="6" rx="3" fill="url(#grayGrad)" y="0"/>
    <text x="75" y="35" font-family="system-ui, sans-serif" font-size="13" font-weight="600" fill="#1e293b" text-anchor="middle">IMPROVEMENTS</text>
    <text x="75" y="55" font-family="system-ui, sans-serif" font-size="10" fill="#64748b" text-anchor="middle">Update system</text>
    <text x="75" y="70" font-family="system-ui, sans-serif" font-size="10" fill="#64748b" text-anchor="middle">prompt</text>
  </g>

  <!-- Center message -->
  <rect x="230" y="175" width="280" height="28" rx="6" fill="#f1f5f9" stroke="#e2e8f0" stroke-width="1"/>
  <text x="370" y="194" font-family="system-ui, sans-serif" font-size="10" fill="#64748b" text-anchor="middle">Repeat for the lifecycle of the AI Agent</text>

  <!-- Arrow 1: TEST CASES → INVOKE AGENT -->
  <path d="M 190 112 L 320 112" stroke="#94a3b8" stroke-width="2" stroke-dasharray="6,4" fill="none" marker-end="url(#arrowhead)"/>

  <!-- Arrow 2: INVOKE AGENT → SCORING -->
  <path d="M 475 112 L 540 112 L 540 200 L 605 200" stroke="#94a3b8" stroke-width="2" stroke-dasharray="6,4" fill="none" marker-end="url(#arrowhead)"/>

  <!-- Arrow 3: SCORING → ANALYSIS -->
  <path d="M 685 245 L 685 307 L 595 307" stroke="#94a3b8" stroke-width="2" stroke-dasharray="6,4" fill="none" marker-end="url(#arrowhead)"/>

  <!-- Arrow 4: ANALYSIS → IMPROVEMENTS -->
  <path d="M 440 307 L 365 307" stroke="#94a3b8" stroke-width="2" stroke-dasharray="6,4" fill="none" marker-end="url(#arrowhead)"/>

  <!-- Arrow 5: IMPROVEMENTS → TEST CASES (loop back) -->
  <path d="M 210 307 L 115 307 L 115 160" stroke="#94a3b8" stroke-width="2" stroke-dasharray="6,4" fill="none" marker-end="url(#arrowhead)"/>

</svg>
